<!DOCTYPE html>
<html lang="zh">

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="">
  <meta name="author" content="">
  <link rel="icon" href="../favicon.ico">

  <title>实验</title>

  <!-- Bootstrap core CSS -->
  <link href="../../lib/css/bootstrap.min.css" rel="stylesheet">

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>

  <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
</head>

<body role="document">

  <div class="container theme-showcase" role="main">

    </br>
    <div class="progress">
      <div class="progress-bar" role="progressbar" aria-valuenow="5" aria-valuemin="0" aria-valuemax="100" style="width: 5%;"><span class="sr-only">进度5%</span></div>
    </div>

    <div class="page-header">
      <h1>规定</h1>
    </div>

    <div class="well" style="width:800px; margin: 0 auto">

      <h2>
        <center>颜色选择游戏！</center>
      </h2>

      <p>
        在这个实验里，你会和另一个人玩一个有趣的沟通游戏。(每个游戏有50轮)，每一轮你们两个人会收到一套颜色，比如：
      </p>
      <p>
        <center><img src="images/colorSet.png" alt="Example objects" style="width:600px;height:200px"></center>
      </p>
      <p>
        你们两人看到颜色的类别是相通的，<b>但是颜色的排列会不同。</b>
      </p>

      <p>
        你们两个人中，一位人会当<b>演说者</b>，另一人会当<b>倾听者</b>。在每一轮，三个颜色里会有个带着<b>黑框</b>的目标颜色。只有演说者会知道目标颜色。演说者的任务是向倾听者描述指定的目标颜色，而且倾听者要选出正确的颜色。<b>每答对一个问题，你们两个人每人都会被奖励一美分（$0.01）</b>。注意：因为两位人看到的颜色排列会不同，所以描述指定颜色所在的位置是没有意义的。
      </p>

      <p>
        <center><img src="images/speakerView.png" alt="Example gameplay" style="width:600px;height:328px"></center>
      </p>
      <p>
        <i> <center> <small> 只有演说者能看得到目标是绿色。</small> </center> </i>
      </p>
      <p>
        于是，现在的目的是来让倾听者看演说者的描写，选出正确的颜色。为了交流方便，两位人能用个对话窗口。请只使用中文来沟通。演说者能用任何的字/词/句来说明目标颜色（这不是禁忌猜词游戏)。倾听者可以在任何时候问他们想要问的问题或者回复演说者的问题。有些轮会容易，有些会困难。
      </p>

      <p>
        当演说者送了讯息和倾听者选到他认为正确的颜色以后，两个玩家会收到反馈（演说者会看到倾听者选择了什么颜色，而倾听者会看到正确的答案），以及你们会进入下一轮。总共有<b>五十轮</b>。最后的轮以后，你们会填写章十五秒钟短的调查。欢迎再次玩一次。
      </p>

      <p>
        一些说明： 第一，因为你在跟别人玩，游戏开始前可能会看到这张屏幕：
        <p>
          <center><img src="images/waitScreen.png" alt="initial matcher's board" style="width:700px;height:150px"></center>
        </p>
        请耐心，在几分钟之内应该会有人来参如游戏。若你等了十五分钟还没有另外一个人参加，你的HIT会自动提交与接受。
      </p>

      <p>
        第二，请尊重别人：不要用对话窗送不适当的东西。而且，不要用屏幕截图透露答案。当另外的人提出问题时，请尽量回应。
      </p>

      <p>
        第三，因为颜色的区别可能又细微又难描述，你和你的伙伴能看见相同的屏幕很重要。请把显示屏亮度设高，以及停用任何显示器变色的软件（比如 f.lux 或 redshift)。
      </p>

      <p>
        最后，开始游戏后请不要刷新网页（包括等待页）。若刷新，你将没有办法再参如你的游戏，并且不能提交HIT。谢谢！
      </p>

      <h4>
        开始前，请进行这短测验。祝你好运，玩得开心！
      </h4>

    </div>
    <div class="page-header">
      <h3>理解考核</h3>
    </div>

    <div class="well" style="width:800px; margin: 0 auto">

      </br>
      演说者能按个颜色来结束一轮。
      </br>
      <input type="radio" name="dgoal" value="no"> 对
      </br>
      <input type="radio" name="dgoal" value="yes"> 错
      </br>


      </br>
      倾听者要选出演说者描述的颜色。
      </br>
      <input type="radio" name="mgoal" value="yes"> 对
      </br>
      <input type="radio" name="mgoal" value="no"> 错
      </br>

      </br>
      玩家可以用中文以外的语言进行沟通。
      </br>
      <input type="radio" name="language" value="no"> 对
      </br>
      <input type="radio" name="language" value="yes"> 错
      </br>

      </br>
      目标颜色会带着黑框。
      </br>
      <input type="radio" name="round" value="yes"> 对
      </br>
      <input type="radio" name="round" value="no"> 错
      </br>

      </br>
      只有演说者能送讯息。
      </br>
      <input type="radio" name="message" value="no"> 对
      </br>
      <input type="radio" name="message" value="yes"> 错
      </br>

      </br>
      总共有两百轮。
      </br>
      <input type="radio" name="comp" value="no"> 对
      </br>
      <input type="radio" name="comp" value="yes"> 错
      </br>

      </br>
      演说者和倾听者会看到同样的颜色排列。
      </br>
      <input type="radio" name="location" value="no"> 对
      </br>
      <input type="radio" name="location" value="yes"> 错
      </br>

      </br>
      <input id="quiz_submit" type="submit" value="提交">
      </br>
      </br>
      <div class="error" style="display:none"> 哎呀！ 你选了错的答案。你还有一个机会。</div>
    </div>
    <!-- /container -->
  </div>
  <script type="text/javascript">
    $('html,body').scrollTop(0);
    var urlParams;
    var match,
      pl = /\+/g,  // Regex for replacing addition symbol with a space
      search = /([^&=]+)=?([^&]*)/g,
      decode = function (s) { return decodeURIComponent(s.replace(pl, " ")); },
      query = location.search.substring(1);

    urlParams = {};
    while (match = search.exec(query))
      urlParams[decode(match[1])] = decode(match[2]);

    console.log(urlParams)

    var counter = 0;
    document.getElementById("quiz_submit").onclick = function () {
      var ans1 = $('input[name="dgoal"]:checked').val();
      var ans2 = $('input[name="mgoal"]:checked').val();
      var ans3 = $('input[name="round"]:checked').val();
      var ans4 = $('input[name="message"]:checked').val();
      var ans5 = $('input[name="comp"]:checked').val();
      var ans6 = $('input[name="location"]:checked').val();

      if (ans1 == "yes" && ans2 == "yes" && ans3 == "yes" &&
        ans4 == "yes" && ans5 == "yes" && ans6 == "yes") {
        var workerId = urlParams.workerId;
        var assignmentId = urlParams.assignmentId;
        var hitId = urlParams.hitId;
        var turkSubmitTo = urlParams.turkSubmitTo;
        location.replace("https://csli-games.herokuapp.com/colors/chineseColorRef/forms/pass.html?workerId=" + workerId
          + "&assignmentId=" + assignmentId
          + "&hitId=" + hitId + "&turkSubmitTo=" + turkSubmitTo);
      } else if (counter == 3) {
        location.replace("https://csli-games.herokuapp.com/colors/chineseColorRef/forms/fail.html");
      } else {
        $('.error').show()
        counter += 1;
      }
    };
  </script>

  <script src="./validate-form.js"></script>

  <!-- Bootstrap core JavaScript
    ================================================== -->
  <!-- Placed at the end of the document so the pages load faster -->

  <script src="../../lib/js/bootstrap.min.js"></script>
</body>

</html>